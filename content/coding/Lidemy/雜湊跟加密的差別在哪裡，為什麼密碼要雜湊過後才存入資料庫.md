---
title: 為什麼密碼要雜湊過後才存入資料庫？
type: coding
category: 程式導師計畫
tags: [Lidemy]
description: 雜湊跟加密的差別在哪裡
date: '2020-10-11'
---

> #### 加密（Encryption）

將明文資訊改變為難以讀取的密文內容，讓人不可讀取。只有擁有解密方法的人，經由解密過程才能將它還原為正常內容，可以將重要資料保護起來，不讓其他人看到。
- 加密內容是可逆的
- 有鑰匙（Key）就可以解密讀取


##### AES
常見的對稱加密演算法，所謂的「對稱」就是說加密解密都是用同一個 key，AES 有超過 10³⁸ 種 key 值，安全性高、不易破解，加密速度快。缺點是**雙方必須先說好密碼是什麼**，因為只要一透過網路傳送，這些資訊就有可能被中間人拿走。

##### RSA
常見的非對稱加密法（Asymmetric Encryption），產生一組兩個 Key，分別叫公鑰跟私鑰，用公鑰加密的內容只能用私鑰解。


然而，並不是所有的資料都需要經由加解密來處理，有些資料其實不應該被還原，就像密碼，只需要經由一道程序驗證它是正確的即可，意思是，我們目的只是確認資料的特徵，而不是拿到全部資料，僅需判斷兩者內容相同即可。
- 提供檔案的摘要（Digest），不需全部的檔案，確認在傳送過程中沒有被任何人改過
- 相同的摘要計算程序，就可以拿到相同的摘要值

> #### 雜湊（Hashing）

而雜湊，就是一個由資料本身計算出摘要的技術，它輸出的資料只能證明在計算當下，針對輸入資料本身所得到的特徵。
一般使用上，我們會**將密碼變成雜湊存在資料庫**，之後使用者輸入相同內容時，只要用同一計算方式重新跑一遍，驗證兩者，若得到同樣結果則表示資料沒有被改動過，而資料本身（也就是真實的密碼）不會被洩漏，就算整包資料庫被偷走，也因為只知道部分特徵，其他人無法還原回去資料本體。
- 無論原文的內容長短，透過雜湊演算法運算完的輸出會是固定長度
- 即便只差一個字，雜湊演算法產生的兩個輸出內容卻會差非常多
- 檔案內容不同就會計算出不同的 hash value
- 不同內容的輸入，得到相同的 hash value 機率極低
- 不需密鑰，也無法逆向解出原本輸入
- 要使用較高強度的 SHA-2 系列與 SHA-3 系列的雜湊演算法

> 雖然無法得到資料本體，但就驗證資料正確性而言，仍然有很多研究在於如何讓雜湊演算法在不同資料上產生相同的摘要，這個現象稱為碰撞（Collision），目前 MD4, MD5, SHA1 這些已經被研究出碰撞的方法，原則上不能再使用

雜湊（Hash）是將目標文字轉換成具有相同長度的、不可逆的雜湊字串（或叫做訊息摘要），而加密（Encrypt）是將目標文字轉換成具有不同長度的、可逆的密文，很容易被人搞混的原因，主要是因為雜湊和加密通常是一起搭配使用，他們都是為了保護資料而設計。

#### 參考資料
* [加密和雜湊有什麼不一樣？](https://blog.m157q.tw/posts/2017/12/25/differences-between-encryption-and-hashing/)
* [一次搞懂密碼學中的三兄弟 — Encode、Encrypt 跟 Hash](https://medium.com/starbugs/what-are-encoding-encrypt-and-hashing-4b03d40e7b0c)
* [雜湊不是加密](https://dotblogs.com.tw/regionbbs/2017/09/21/hashing_is_not_encryption)